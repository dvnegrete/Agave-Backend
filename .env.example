# ============================================================================
# AGAVE BACKEND - ENVIRONMENT VARIABLES EXAMPLE
# ============================================================================
# Copy this file to .env and fill in the values for your environment
# See ENVIRONMENT_CONFIGURATION.md for detailed setup instructions
# ============================================================================

# ============================================================================
# ENVIRONMENT SELECTION (CRITICAL)
# ============================================================================
# Values: development | staging | production
# This controls database pool size, logging, and cookie security behavior
NODE_ENV=development

# ============================================================================
# FRONTEND CONFIGURATION (CRITICAL)
# ============================================================================
# REQUIRED in ALL environments - determines cookie security
# Format: http://... (development) or https://... (staging/production)
#
# Development:  http://localhost:PORT
# Staging/Production: https://your-frontend-domain.com
FRONTEND_URL=http://localhost:5173

# Portal web para consulta de información (opcional)
# Configure según el ambiente
PORTAL_WEB_URL=http://localhost:3000

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
PORT=3000

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Connection string for TypeORM
# For local development: postgresql://user:password@localhost:5432/agave_db
# For production: Use Railway provided DATABASE_URL
DATABASE_URL=postgresql://user:password@localhost:5432/agave_db

# Direct connection URL (used for migrations)
# Usually the same as DATABASE_URL but without connection pooling parameters
DIRECT_URL=postgresql://user:password@localhost:5432/agave_db

# Individual database components (used if DATABASE_URL not provided)
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=user
DB_PASSWORD=password
DB_NAME=agave_db

# ============================================================================
# JWT CONFIGURATION
# ============================================================================
# Secret key for signing JWT tokens (MUST be different per environment!)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secret-key-here-change-this

# JWT expiration times
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ============================================================================
# GOOGLE CLOUD CONFIGURATION
# ============================================================================
# GCP service account credentials (used for Firebase Auth, Vision API, Cloud Storage, etc.)
# Get from GCP Console → Project Settings → Service Account
PROJECT_ID_GCP=your-gcp-project-id
PRIVATE_KEY_ID=your-private-key-id
PRIVATE_KEY_GCP="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
CLIENT_EMAIL_GCP=your-service-account@project.iam.gserviceaccount.com
CLIENT_ID_GCP=your-client-id

# ============================================================================
# GOOGLE CLOUD STORAGE
# ============================================================================
# For storing uploaded vouchers and documents
BUCKET_NAME_GCP=bucket-name
BUCKET_NAME_VOUCHERS=vouchers-bucket-name

# ============================================================================
# OPENAI CONFIGURATION
# ============================================================================
# For OCR processing of vouchers
OPENAI_API_KEY=sk-proj-your-openai-api-key

# ============================================================================
# WHATSAPP CONFIGURATION (Optional)
# ============================================================================
# Meta WhatsApp Business API integration
TOKEN_WA=your-whatsapp-token
ACCESS_TOKEN_VERIFY_WA=your-verify-token
PHONE_NUMBER_ID_WA=your-phone-number-id

# ============================================================================
# TELEGRAM CONFIGURATION (Optional)
# ============================================================================
# Telegram Bot for notifications
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_WEBHOOK_URL=https://your-backend-url/vouchers/telegram/webhook

# ============================================================================
# NOTES FOR DEPLOYMENT
# ============================================================================
# Development:
#   - Set NODE_ENV=development
#   - Use local database
#   - FRONTEND_URL=http://localhost:5173
#   - Query logging enabled
#   - Auto-sync enabled
#
# Staging:
#   - Set NODE_ENV=staging
#   - Use staging DATABASE_URL
#   - FRONTEND_URL=https://your-frontend-domain.com
#   - Query logging disabled (no performance overhead)
#   - Auto-sync disabled (manual migrations)
#   - Pool: 10 connections
#
# Production:
#   - Set NODE_ENV=production
#   - Use production DATABASE_URL
#   - FRONTEND_URL=https://your-production-domain.com
#   - Query logging disabled
#   - Auto-sync disabled
#   - Pool: 20 connections
#   - Ensure backups are configured!
